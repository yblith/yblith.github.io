(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2833:(e,t,s)=>{Promise.resolve().then(s.bind(s,6452))},6452:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(5155),l=s(2115),r=s(6976);let n={calories:2e3,protein:150},o="dailyGoals",i=()=>{{let e=localStorage.getItem(o);if(e)return JSON.parse(e);localStorage.setItem(o,JSON.stringify(n))}return n},d=e=>{localStorage.setItem(o,JSON.stringify(e))};function c(e){let{mealType:t,onAddItem:s}=e,[r,n]=(0,l.useState)(""),[o,i]=(0,l.useState)(""),[d,c]=(0,l.useState)("");return(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!r.trim()||!o||!d)return void alert("Please fill in all fields.");s(t,{name:r.trim(),calories:parseInt(o,10),protein:parseInt(d,10)}),n(""),i(""),c("")},className:"mb-4 p-4 border rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-2 capitalize",children:["Add to ",t]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"".concat(t,"-itemName"),className:"block text-sm font-medium text-gray-700",children:"Item Name"}),(0,a.jsx)("input",{type:"text",id:"".concat(t,"-itemName"),value:r,onChange:e=>n(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-black",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"".concat(t,"-calories"),className:"block text-sm font-medium text-gray-700",children:"Calories"}),(0,a.jsx)("input",{type:"number",id:"".concat(t,"-calories"),value:o,onChange:e=>i(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-black",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"".concat(t,"-protein"),className:"block text-sm font-medium text-gray-700",children:"Protein (g)"}),(0,a.jsx)("input",{type:"number",id:"".concat(t,"-protein"),value:d,onChange:e=>c(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-black",required:!0})]})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Add Item"})]})}function m(e){let{mealType:t,items:s,onRemoveItem:l}=e;if(!s||0===s.length)return(0,a.jsxs)("div",{className:"p-4 border rounded-lg mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold capitalize",children:t}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No items added yet."})]});let r=s.reduce((e,t)=>e+t.calories,0),n=s.reduce((e,t)=>e+t.protein,0);return(0,a.jsxs)("div",{className:"p-4 border rounded-lg mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold capitalize mb-2",children:t}),(0,a.jsx)("ul",{className:"space-y-2 mb-2",children:s.map(e=>(0,a.jsxs)("li",{className:"flex justify-between items-center p-2 border-b",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-black",children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:["(",e.calories," kcal, ",e.protein,"g protein)"]})]}),(0,a.jsx)("button",{onClick:()=>l(t,e.id),className:"text-red-500 hover:text-red-700 text-sm",children:"Remove"})]},e.id))}),(0,a.jsx)("div",{className:"text-right font-semibold text-black",children:(0,a.jsxs)("p",{children:["Total: ",r," kcal, ",n,"g protein"]})})]})}function u(e){let{currentLog:t,dailyGoals:s}=e,l=(null==t?void 0:t.dailyTotals.calories)||0,r=(null==t?void 0:t.dailyTotals.protein)||0,n=((null==s?void 0:s.calories)||0)-l,o=((null==s?void 0:s.protein)||0)-r,i=(null==s?void 0:s.calories)?l/s.calories*100:0,d=(null==s?void 0:s.protein)?r/s.protein*100:0;return(0,a.jsxs)("div",{className:"p-4 border rounded-lg mb-6 bg-gray-50 dark:bg-slate-800 dark:border-slate-700",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-slate-100",children:"Daily Progress"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-base font-medium text-blue-700 dark:text-blue-400",children:"Calories"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-400",children:[l," / ",(null==s?void 0:s.calories)||0," kcal"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-slate-700",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"".concat(Math.min(i,100),"%")}})}),n>0?(0,a.jsxs)("p",{className:"text-xs text-gray-600 dark:text-slate-400 mt-1",children:[n," kcal remaining"]}):(0,a.jsxs)("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["Goal reached! ",Math.abs(n)," kcal over."]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-base font-medium text-green-700 dark:text-green-400",children:"Protein"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-green-700 dark:text-green-400",children:[r," / ",(null==s?void 0:s.protein)||0," g"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-slate-700",children:(0,a.jsx)("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:"".concat(Math.min(d,100),"%")}})}),o>0?(0,a.jsxs)("p",{className:"text-xs text-gray-600 dark:text-slate-400 mt-1",children:[o,"g protein remaining"]}):(0,a.jsxs)("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["Goal reached! ",Math.abs(o),"g protein over."]})]})]})]})}function x(e){let{currentGoals:t,onGoalsChange:s}=e,[r,n]=(0,l.useState)(t.calories),[o,i]=(0,l.useState)(t.protein);return(0,l.useEffect)(()=>{n(t.calories),i(t.protein)},[t]),(0,a.jsxs)("div",{className:"p-4 border rounded-lg mb-6 bg-white dark:bg-slate-800 dark:border-slate-700 shadow-md",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-slate-100",children:"Set Your Daily Goals"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s({calories:parseInt(r,10)||0,protein:parseInt(o,10)||0})},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"caloriesGoal",className:"block text-sm font-medium text-gray-700 dark:text-slate-300",children:"Calories (kcal)"}),(0,a.jsx)("input",{type:"number",name:"caloriesGoal",id:"caloriesGoal",value:r,onChange:e=>n(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm text-gray-900 dark:text-slate-100",min:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"proteinGoal",className:"block text-sm font-medium text-gray-700 dark:text-slate-300",children:"Protein (g)"}),(0,a.jsx)("input",{type:"number",name:"proteinGoal",id:"proteinGoal",value:o,onChange:e=>i(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm text-gray-900 dark:text-slate-100",min:"0"})]}),(0,a.jsx)("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-sky-600 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 dark:focus:ring-offset-slate-800",children:"Set Goals"})]})]})}var g=s(6874),b=s.n(g);let h=()=>new Date().toISOString().split("T")[0];function p(){let[e,t]=(0,l.useState)(h()),[s,n]=(0,l.useState)(null),[o,g]=(0,l.useState)({calories:0,protein:0});(0,l.useEffect)(()=>{g(i())},[]),(0,l.useEffect)(()=>{let t=(0,r._j)(e);t?n(t):n({date:e,meals:{breakfast:[],lunch:[],dinner:[],snacks:[]},dailyTotals:{calories:0,protein:0}})},[e]),(0,l.useEffect)(()=>{s&&(0,r.Lh)(s)},[s]);let p=e=>{let t=0,s=0;return Object.keys(e.meals).forEach(a=>{e.meals[a].forEach(e=>{t+=e.calories,s+=e.protein})}),{calories:t,protein:s}},f=(e,t)=>{if(!s)return;let a={...t,id:"".concat(e,"-").concat(new Date().getTime())},l={...s,meals:{...s.meals,[e]:[...s.meals[e],a]}};l.dailyTotals=p(l),n(l)},k=(e,t)=>{if(!s)return;let a={...s,meals:{...s.meals,[e]:s.meals[e].filter(e=>e.id!==t)}};a.dailyTotals=p(a),n(a)},y=s=>{let a=new Date(e);a.setDate(a.getDate()+s),t(a.toISOString().split("T")[0])};return(0,a.jsxs)("main",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[(0,a.jsxs)("header",{className:"mb-8 text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100",children:"My Calorie & Protein Tracker"}),(0,a.jsxs)("div",{className:"mt-4 flex justify-center items-center space-x-3",children:[(0,a.jsx)("button",{onClick:()=>y(-1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300 transition-colors dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:"← Previous Day"}),(0,a.jsx)("p",{className:"text-xl text-slate-600 dark:text-slate-300 font-medium",children:e}),(0,a.jsx)("button",{onClick:()=>y(1),disabled:e===h(),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300 transition-colors disabled:opacity-50 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 dark:disabled:opacity-60",children:"Next Day →"})]}),(0,a.jsx)(b(),{href:"/trends",className:"mt-6 inline-block text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-500 underline text-lg",children:"View Trends"})]}),(0,a.jsx)(x,{currentGoals:o,onGoalsChange:e=>{g(e),d(e)}}),(0,a.jsx)(u,{currentLog:s,dailyGoals:o}),(0,a.jsxs)("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md",children:[(0,a.jsx)(c,{mealType:"breakfast",onAddItem:f}),(0,a.jsx)(m,{mealType:"breakfast",items:(null==s?void 0:s.meals.breakfast)||[],onRemoveItem:k})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md",children:[(0,a.jsx)(c,{mealType:"lunch",onAddItem:f}),(0,a.jsx)(m,{mealType:"lunch",items:(null==s?void 0:s.meals.lunch)||[],onRemoveItem:k})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md",children:[(0,a.jsx)(c,{mealType:"dinner",onAddItem:f}),(0,a.jsx)(m,{mealType:"dinner",items:(null==s?void 0:s.meals.dinner)||[],onRemoveItem:k})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md",children:[(0,a.jsx)(c,{mealType:"snacks",onAddItem:f}),(0,a.jsx)(m,{mealType:"snacks",items:(null==s?void 0:s.meals.snacks)||[],onRemoveItem:k})]})]})]})}},6976:(e,t,s)=>{"use strict";s.d(t,{Lh:()=>r,_j:()=>n,ic:()=>o});let a="calorieTracker_";function l(e){return"".concat(a).concat(e)}function r(e){try{localStorage.setItem(l(e.date),JSON.stringify(e))}catch(e){console.error("Error saving to local storage:",e)}}function n(e){try{let t=localStorage.getItem(l(e));return t?JSON.parse(t):null}catch(e){return console.error("Error reading from local storage:",e),null}}function o(){let e=[];try{for(let t=0;t<localStorage.length;t++){let s=localStorage.key(t);if(s&&s.startsWith(a)){let t=localStorage.getItem(s);t&&e.push(JSON.parse(t))}}return e.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())}catch(e){return console.error("Error reading all logs from local storage:",e),[]}}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,441,684,358],()=>t(2833)),_N_E=e.O()}]);